app.factory("appService",["$http",function(i){var e=this;var k="https://newsapi.org/v1/sources";var c="https://newsapi.org/v1/sources?category=";var j="https://newsapi.org/v1/articles?source=";var g="https://api.rss2json.com/v1/api.json?rss_url=http%3A%2F%2Ffeeds.feedburner.com%2FPuthiyathalaimurai_Districts_News";var b="https://api.rss2json.com/v1/api.json?rss_url=http%3A%2F%2Ffeeds.feedburner.com%2FPuthiyathalaimurai_Tamilnadu_News&api_key=3159ncurciuuew1nmfhqt5zap8r7nqisqzcx4yvt&order_by=pubDate&order_dir=desc&count=50";var h="https://api.rss2json.com/v1/api.json?rss_url=http%3A%2F%2Ffeeds.feedburner.com%2FPuthiyathalaimurai_India_News%3Fformat%3Dxmlhttps%3A%2F%2Fnews.ycombinator.com%2Frss&api_key=3159ncurciuuew1nmfhqt5zap8r7nqisqzcx4yvt&order_by=pubDate&order_dir=asc&count=50";var d="https://api.rss2json.com/v1/api.json?rss_url=http%3A%2F%2Ffeeds.feedburner.com%2FPuthiyathalaimurai_World_News%3Fformat%3Dxml&api_key=3159ncurciuuew1nmfhqt5zap8r7nqisqzcx4yvt";var a="10ad575c68f24879949f89147d38c9ce";e.getNewsByCategory=function(l){return i.get(c+l).then(function(m){return m.data.sources},function(m){console.log("Error While fetching Data in service")})};e.getAllSources=function(){return i.get(k).then(function(l){return l.data.sources},function(l){console.log("Error while fetching all sources")})};e.getNewspapers=function(l,m){return i.get(j+l+"&sortBy="+m+"&apiKey="+a).then(function(n){return n.data.articles},function(n){console.log("Error while fetching all sources")})};e.getNewspapersByCategory=function(m,l){var m=m;var l=l;return i.get(j+m+"&apiKey="+a).then(function(n){for(var o=0;o<n.data.articles.length;o++){n.data.articles[o]["channel_id"]=m;n.data.articles[o]["channel_name"]=l}return n.data.articles},function(n){console.log("Error while fetching all sources")})};e.getLocalRssFeeds=function(){return f(b)};e.getRSSIndianNews=function(){return f(h)};e.getRSSWorldNews=function(){return f(d)};function f(l){return i.get(l).then(function(n){console.log("localNews service",n.data);for(var o=0;o<n.data.items.length;o++){var q=n.data.items[o];var m=q.content.match(/http:.*?.jpg/g);var p=q.content.match(/<p>.*?<\/p\>/g);p.shift();p.pop();var r={title:$(p[0]).text(),body:$(p[1]).text(),description:$(p[2]).text(),image_url:m[0]};n.data.items[o]["content_modified"]=r}return n.data},function(m){console.log("Error while fetching all sources")})}return e}]);