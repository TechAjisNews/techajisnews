app.factory("appService",["$http",function(g){var d=this;var j="https://newsapi.org/v1/sources";var c="https://newsapi.org/v1/sources?category=";var h="https://icons.better-idea.org/icon?url=";var i="https://newsapi.org/v1/articles?source=";var f="https://api.rss2json.com/v1/api.json?rss_url=http%3A%2F%2Ffeeds.feedburner.com%2FPuthiyathalaimurai_Districts_News";var b="https://api.rss2json.com/v1/api.json?rss_url=http%3A%2F%2Ffeeds.feedburner.com%2FPuthiyathalaimurai_Tamilnadu_News&api_key=3159ncurciuuew1nmfhqt5zap8r7nqisqzcx4yvt&order_by=pubDate&order_dir=desc&count=50";var e=" https://api.rss2json.com/v1/api.json?rss_url=http%3A%2F%2Ffeeds.feedburner.com%2FPuthiyathalaimurai_India_News%3Fformat%3Dxmlhttps%3A%2F%2Fnews.ycombinator.com%2Frss&api_key=3159ncurciuuew1nmfhqt5zap8r7nqisqzcx4yvt&order_by=pubDate&order_dir=asc&count=50";var a="10ad575c68f24879949f89147d38c9ce";d.getNewsByCategory=function(k){return g.get(c+k).then(function(l){return l.data.sources},function(l){console.log("Error While fetching Data in service")})};d.getAllSources=function(){return g.get(j).then(function(k){return k.data.sources},function(k){console.log("Error while fetching all sources")})};d.getNewspapers=function(k,l){return g.get(i+k+"&sortBy="+l+"&apiKey="+a).then(function(m){return m.data.articles},function(m){console.log("Error while fetching all sources")})};d.getNewspapersByCategory=function(l,k){var l=l;var k=k;return g.get(i+l+"&apiKey="+a).then(function(m){for(var n=0;n<m.data.articles.length;n++){m.data.articles[n]["channel_id"]=l;m.data.articles[n]["channel_name"]=k}return m.data.articles},function(m){console.log("Error while fetching all sources")})};d.getLocalRssFeeds=function(){return g.get(b).then(function(l){console.log("localNews service",l.data);for(var m=0;m<l.data.items.length;m++){var o=l.data.items[m];var k=o.content.match(/http:.*?.jpg/g);var n=o.content.match(/<p>.*?<\/p\>/g);n.shift();n.pop();var p={title:$(n[0]).text(),body:$(n[1]).text(),description:$(n[2]).text(),image_url:k[0]};l.data.items[m]["content_modified"]=p}return l.data},function(k){console.log("Error while fetching all sources")})};d.getRSSIndianNews=function(){return g.get(e).then(function(l){console.log("localNews service",l.data);for(var m=0;m<l.data.items.length;m++){var o=l.data.items[m];var k=o.content.match(/http:.*?.jpg/g);var n=o.content.match(/<p>.*?<\/p\>/g);n.shift();n.pop();var p={title:$(n[0]).text(),body:$(n[1]).text(),description:$(n[2]).text(),image_url:k[0]};l.data.items[m]["content_modified"]=p}return l.data},function(k){console.log("Error while fetching all sources")})};return d}]);